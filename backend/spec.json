{"openapi":"3.0.0","paths":{"/line/webhook":{"post":{"operationId":"LineController_findAll","summary":"","description":"LINEサーバーから呼び出される","parameters":[{"name":"X-Line-Signature","in":"header","description":"LINEプラットフォームから送信されたことを確認するための署名（x-line-signatureでも可）","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateLineDto"}}}},"responses":{"200":{"description":""}},"tags":["LINE"]}},"/settings/token":{"post":{"operationId":"SettingController_saveToken","summary":"","description":"LINE チャネルID・トークンを保存する","parameters":[{"name":"Bearer","in":"header","description":"Firebase IDトークン","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateSettingDto"}}}},"responses":{"201":{"description":"正常登録"},"400":{"content":{"application/json":{"examples":{"bodyInvalid":{"description":"チャネルID・シークレットが不正","value":{"result":false,"reason":"Channel ID, Secret is InValid"}}}}},"description":""}},"tags":["設定"],"security":[{"bearer":[]}]},"get":{"operationId":"SettingController_getToken","summary":"","description":"LINE チャネルID・トークンを保存済みであるかを返す","parameters":[{"name":"Bearer","in":"header","description":"Firebase IDトークン","schema":{"type":"string"}}],"responses":{"200":{"content":{"application/json":{"examples":{"saved":{"description":"保存済","value":{"result":true}},"notSaved":{"description":"未保存","value":{"result":false}}}}},"description":""}},"tags":["設定"],"security":[{"bearer":[]}]}},"/settings/friends":{"post":{"operationId":"SettingController_updateFriend","summary":"","description":"友だち情報を更新する","parameters":[{"name":"Bearer","in":"header","description":"Firebase IDトークン","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateFriendDto"}}}},"responses":{"201":{"description":""}},"tags":["設定"],"security":[{"bearer":[]}]},"get":{"operationId":"SettingController_getFriends","summary":"","description":"友だち一覧を取得する","parameters":[{"name":"Bearer","in":"header","description":"Firebase IDトークン","schema":{"type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReponseFriendDto"},"examples":{"noFriend":{"value":{"friends":[]},"description":"友だちなし"},"friends":{"description":"友だちあり","value":{"friends":[{"userID":"userID1","userName":"ユーザー名1","memo":"メモ1","imgUrl":"https://example.com/img.jpg","lineUserName":"LINEユーザー名1"},{"userID":"userID2","userName":"ユーザー名2","memo":"メモ2","imgUrl":"","lineUserName":"LINEユーザー名2"}]}}}}},"description":""}},"tags":["設定"],"security":[{"bearer":[]}]}},"/events":{"post":{"operationId":"EventsController_create","summary":"","description":"イベントを作成し、LINEで通知する","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateEventDto"}}}},"responses":{"201":{"description":"正常"},"429":{"description":"LINEサーバー側要因によるエラー（月間送信可能件数超過など）"}},"tags":["イベント"],"security":[{"bearer":[]}]},"get":{"operationId":"EventsController_findAll","summary":"","description":"イベント一覧を取得する","parameters":[],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseEventListDto"},"examples":{"empty":{"description":"空","value":{"events":[]}},"multi":{"description":"複数","value":{"events":[{"eventID":"eventId1","eventName":"イベント名1","createdAt":"2022-06-09T15:00:00.000Z"},{"eventID":"eventId2","eventName":"イベント名2","createdAt":"2022-06-13T15:00:00.000Z"}]}}}}},"description":""}},"tags":["イベント"],"security":[{"bearer":[]}]}},"/events/{id}":{"get":{"operationId":"EventsController_findOne","summary":"","description":"個別のイベントを取得する","parameters":[{"name":"id","required":true,"in":"path","description":"イベントID","schema":{"type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseEventDto"},"examples":{"answer":{"description":"回答あり","value":{"event":{"eventID":"eventId1","eventName":"イベント名1","createdAt":"2022-09-17T00:03:22.601Z","message":"イベントに参加しますか？","leftButtonLabel":"参加する","rightButtonLabel":"参加しない","answers":[{"userName":"ユーザーA","Attendance":"参加する","date":"2022-09-17T00:04:51.601Z"},{"userName":"ユーザーB","Attendance":"参加しない","date":"2022-09-15T00:07:33.601Z"}]}}},"noAnswer":{"description":"回答なし","value":{"event":{"eventID":"eventId1","eventName":"イベント名1","createdAt":"2022-09-17T00:03:22.601Z","message":"イベントに参加しますか？","leftButtonLabel":"参加する","rightButtonLabel":"参加しない","answers":[]}}}}}},"description":""}},"tags":["イベント"],"security":[{"bearer":[]}]}}},"info":{"title":"LEVAS API","description":"","version":"1.0","contact":{}},"tags":[],"servers":[],"components":{"securitySchemes":{"bearer":{"scheme":"bearer","bearerFormat":"JWT","type":"http"}},"schemas":{"CreateLineDto":{"type":"object","properties":{"destination":{"type":"string"}},"required":["destination"]},"CreateSettingDto":{"type":"object","properties":{"channelID":{"type":"string","description":"LINE チャネルID"},"channelSecret":{"type":"string","description":"LINE チャネルシークレット"}},"required":["channelID","channelSecret"]},"UpdateFriendDto":{"type":"object","properties":{"userID":{"type":"string","description":"ユーザーID"},"userName":{"type":"string","description":"ユーザー名","maxLength":100},"memo":{"type":"string","description":"メモ","maxLength":500}},"required":["userID","userName","memo"]},"ReponseFriendItem":{"type":"object","properties":{"userID":{"type":"string","description":"ユーザーID"},"userName":{"type":"string","description":"ユーザー名"},"memo":{"type":"string","description":"メモ"},"imgUrl":{"type":"string","description":"アイコン画像URL（未設定なら空文字）"},"lineUserName":{"type":"string","description":"LINE表示名"}},"required":["userID","userName","memo","imgUrl","lineUserName"]},"ReponseFriendDto":{"type":"object","properties":{"friends":{"description":"友だち一覧","type":"array","items":{"$ref":"#/components/schemas/ReponseFriendItem"}}},"required":["friends"]},"CreateEventDto":{"type":"object","properties":{"message":{"type":"string","description":"LINE 送信テキスト","maxLength":240},"leftButtonLabel":{"type":"string","description":"LINE 左側ボタンラベル名","maxLength":20},"rightButtonLabel":{"type":"string","description":"LINE 右側ボタンラベル名","maxLength":20},"eventName":{"type":"string","description":"イベント名","maxLength":100}},"required":["message","leftButtonLabel","rightButtonLabel","eventName"]},"EventItem":{"type":"object","properties":{"eventID":{"type":"string","description":"イベントID"},"eventName":{"type":"string","description":"イベント名"},"createdAt":{"format":"date-time","type":"string","description":"作成日時"}},"required":["eventID","eventName","createdAt"]},"ResponseEventListDto":{"type":"object","properties":{"events":{"description":"イベント一覧","type":"array","items":{"$ref":"#/components/schemas/EventItem"}}},"required":["events"]},"Answer":{"type":"object","properties":{"userName":{"type":"string","description":"ユーザー名"},"Attendance":{"type":"string","description":"出席可否"},"date":{"format":"date-time","type":"string","description":"登録日時"}},"required":["userName","Attendance","date"]},"EventDetail":{"type":"object","properties":{"message":{"type":"string","description":"LINE 送信テキスト","example":"イベントに参加しますか？"},"leftButtonLabel":{"type":"string","description":"LINE 左側ボタンラベル名","example":"参加する"},"rightButtonLabel":{"type":"string","description":"LINE 右側ボタンラベル名","example":"参加しない"},"answers":{"description":"出席一覧","type":"array","items":{"$ref":"#/components/schemas/Answer"}}},"required":["message","leftButtonLabel","rightButtonLabel","answers"]},"ResponseEventDto":{"type":"object","properties":{"event":{"description":"イベント詳細","allOf":[{"$ref":"#/components/schemas/EventDetail"}]}},"required":["event"]}}}}